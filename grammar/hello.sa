import std.stdio : writeln
import std.lists

export fn main(args) {
    ?n = args[1],
    ?jobs = hello(n),
    lists.foreach(fn (job) {
        job <| "Standing on the shoulders of giants"
    }, jobs)
}

fn hello(n, jobs = []) {
    if n > 0 {
        ?job = spawn fn () {
            receive {
                case ?message {
                   writeln("$n: $message")
                }
            }
        },
        hello(n - 1, job ~ jobs)
    } else {
        jobs
    }
}
